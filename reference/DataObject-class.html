<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="DataObject is a wrapper class that associates raw data or a data file with system-level metadata 
describing the data.  The system metadata includes attributes such as the object's identifier, 
type, size, checksum, owner, version relationship to other objects, access rules, and other critical metadata.
The SystemMetadata is compliant with the DataONE federated repository network's definition of SystemMetadata, and
is encapsulated as a separate object of type SystemMetadata that can be manipulated as needed. Additional science-level and
domain-specific metadata is out-of-scope for SystemMetadata, which is intended only for critical metadata for
managing objects in a repository system."><title>DataObject wraps raw data with system-level metadata — DataObject-class • datapack</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DataObject wraps raw data with system-level metadata — DataObject-class"><meta property="og:description" content="DataObject is a wrapper class that associates raw data or a data file with system-level metadata 
describing the data.  The system metadata includes attributes such as the object's identifier, 
type, size, checksum, owner, version relationship to other objects, access rules, and other critical metadata.
The SystemMetadata is compliant with the DataONE federated repository network's definition of SystemMetadata, and
is encapsulated as a separate object of type SystemMetadata that can be manipulated as needed. Additional science-level and
domain-specific metadata is out-of-scope for SystemMetadata, which is intended only for critical metadata for
managing objects in a repository system."><meta property="og:image" content="https://docs.ropensci.org/datapack/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">datapack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/datapack-overview.html">datapack R Package Overview</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/datapack/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>DataObject wraps raw data with system-level metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/datapack/blob/HEAD/R/DataObject.R" class="external-link"><code>R/DataObject.R</code></a></small>
      <div class="d-none name"><code>DataObject-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>DataObject is a wrapper class that associates raw data or a data file with system-level metadata 
describing the data.  The system metadata includes attributes such as the object's identifier, 
type, size, checksum, owner, version relationship to other objects, access rules, and other critical metadata.
The SystemMetadata is compliant with the DataONE federated repository network's definition of SystemMetadata, and
is encapsulated as a separate object of type <code><a href="SystemMetadata.html">SystemMetadata</a></code> that can be manipulated as needed. Additional science-level and
domain-specific metadata is out-of-scope for SystemMetadata, which is intended only for critical metadata for
managing objects in a repository system.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A DataObject can be constructed by passing the data and SystemMetadata to the new() method, or by passing
an identifier, data, format, user, and DataONE node identifier, in which case a SystemMetadata instance will
be generated with these fields and others that are calculated (such as size and checksum).</p>
<p>Data are associated with the DataObject either by passing it as a <code>'raw'</code> value to the <code>'dataobj'</code>
parameter in the constructor, which is then stored in memory, or by passing a fully qualified file path to the 
data in the <code>'filename'</code> parameter, which is then stored on disk.  One of dataobj or filename is required.
Use the <code>'filename'</code> approach when data are too large to be managed effectively in memory.  Callers can
access the <code>'filename'</code> slot to get direct access to the file, or can call <code>'getData()'</code> to retrieve the
contents of the data or file as a raw value (but this will read all of the data into memory).</p>
    </div>
    <div class="section level2">
    <h2 id="slots">Slots<a class="anchor" aria-label="anchor" href="#slots"></a></h2>
    

<dl><dt><code>sysmeta</code></dt>
<dd><p>A value of type <code>"SystemMetadata"</code>, containing the metadata about the object</p></dd>


<dt><code>data</code></dt>
<dd><p>A value of type <code>"raw"</code>, containing the data represented in this object</p></dd>


<dt><code>filename</code></dt>
<dd><p>A character value that contains the fully-qualified path to the object data on disk</p></dd>


<dt><code>dataURL</code></dt>
<dd><p>A character value for the URL used to load data into this DataObject</p></dd>


<dt><code>updated</code></dt>
<dd><p>A list containing logical values which indicate if system metadata or the data object have been updated since object creation.</p></dd>


<dt><code>oldId</code></dt>
<dd><p>A character string containing the previous identifier used, before a <code>"replaceMember"</code> call.</p></dd>


<dt><code>targetPath</code></dt>
<dd><p>An optional character string holding the path of where the file is placed in a downloaded package.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    

<ul><li><p><code><a href="DataObject-initialize.html">initialize</a></code>: Initialize a DataObject</p></li>
<li><p><code><a href="addAccessRule.html">addAccessRule</a></code>: Add a Rule to the AccessPolicy</p></li>
<li><p><code><a href="canRead.html">canRead</a></code>: Test whether the provided subject can read an object.</p></li>
<li><p><code><a href="getData.html">getData</a></code>: Get the data content of a specified data object</p></li>
<li><p><code><a href="getFormatId.html">getFormatId</a></code>: Get the FormatId of the DataObject</p></li>
<li><p><code><a href="getIdentifier.html">getIdentifier</a></code>: Get the Identifier of the DataObject</p></li>
<li><p><code><a href="hasAccessRule.html">hasAccessRule</a></code>: Determine if an access rules exists for a DataObject.</p></li>
<li><p><code><a href="setPublicAccess.html">setPublicAccess</a></code>: Add a Rule to the AccessPolicy to make the object publicly readable.</p></li>
<li><p><code><a href="updateXML.html">updateXML</a></code>: Update selected elements of the xml content of a DataObject</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="datapack.html">datapack</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="st">"1,2,3\n4,5,6\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">targetPath</span> <span class="op">&lt;-</span> <span class="st">"myData/time-trials/trial_data.csv"</span></span></span>
<span class="r-in"><span><span class="va">do</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="st">"DataObject"</span>, <span class="st">"id1"</span>, dataobj<span class="op">=</span><span class="va">data</span>, <span class="st">"text/csv"</span>, </span></span>
<span class="r-in"><span>  <span class="st">"uid=jones,DC=example,DC=com"</span>, <span class="st">"urn:node:KNB"</span>, targetPath<span class="op">=</span><span class="va">targetPath</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="getIdentifier.html">getIdentifier</a></span><span class="op">(</span><span class="va">do</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "id1"</span>
<span class="r-in"><span><span class="fu"><a href="getFormatId.html">getFormatId</a></span><span class="op">(</span><span class="va">do</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "text/csv"</span>
<span class="r-in"><span><span class="fu"><a href="getData.html">getData</a></span><span class="op">(</span><span class="va">do</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 31 2c 32 2c 33 0a 34 2c 35 2c 36 0a</span>
<span class="r-in"><span><span class="fu"><a href="canRead.html">canRead</a></span><span class="op">(</span><span class="va">do</span>, <span class="st">"uid=anybody,DC=example,DC=com"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">do</span> <span class="op">&lt;-</span> <span class="fu"><a href="setPublicAccess.html">setPublicAccess</a></span><span class="op">(</span><span class="va">do</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="canRead.html">canRead</a></span><span class="op">(</span><span class="va">do</span>, <span class="st">"public"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="canRead.html">canRead</a></span><span class="op">(</span><span class="va">do</span>, <span class="st">"uid=anybody,DC=example,DC=com"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co"># Also can create using a file for storage, rather than memory</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">tf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="va">tf</span>, <span class="st">"wb"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">targetPath</span> <span class="op">&lt;-</span> <span class="st">"myData/time-trials/trial_data.csv"</span></span></span>
<span class="r-in"><span><span class="va">do</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="st">"DataObject"</span>, <span class="st">"id1"</span>, format<span class="op">=</span><span class="st">"text/csv"</span>, user<span class="op">=</span><span class="st">"uid=jones,DC=example,DC=com"</span>, </span></span>
<span class="r-in"><span>  mnNodeId<span class="op">=</span><span class="st">"urn:node:KNB"</span>, filename<span class="op">=</span><span class="va">tf</span>, targetPath<span class="op">=</span><span class="va">targetPath</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

